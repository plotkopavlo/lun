
varying vec2 vUv;
    uniform vec2 u_resolution;
    uniform vec2 u_mouse;
    uniform float u_time;
    uniform sampler2D texture;
    uniform sampler2D map1;
    uniform sampler2D map2;
    uniform float u_animation;
    void main() {
    float amplitude = 0.001;
    float frequency = 50.0;
    float R1 = 1.0;
    float R2 = 1.0;
    float C1 = 0.2;

    vec2 st = gl_FragCoord.xy/u_resolution.xy;

    float m_y =  (u_mouse.y/u_resolution.y - 0.5) * 0.01;
    float m_x =  (u_mouse.x/u_resolution.x - 0.5) * 0.01;
    vec2  m =  (u_mouse/u_resolution - 0.5) * 0.05;

    float distort_x = sin(vUv.y * frequency + u_time) * amplitude + m.x;
    float map1 = texture2D(map1, vUv).r;
    float map2 = texture2D(map2, vUv).r;
    vec4 color1 = texture2D(texture,
    vec2(
    vUv.x + distort_x*(map2*map1 + C1 * (1.0 - map1) + C1*R2*R2*(1.0 - map2)),
    vUv.y)
    );
    vec4 color2 = texture2D(texture, vUv);
    // gl_FragColor = vec4(abs(sin(u_time)),0.0,0.0,1.0);

    //gl_FragColor = vec4( vec3(0.0,1.0,0.0),1.0);

   gl_FragColor = color1;

}